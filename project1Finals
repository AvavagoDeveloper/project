#include <iostream>

using namespace std;

int main() {

    int choice1, choice2, choice3, quanti = 0, numOrders, casualSneakersCount = 0, runningShoesCount = 0, loafersCount = 0, dressShoesCount = 0, shoeSize = 0;
    int sandalsCount = 0, leatherBootsCount = 0, ruggedBootsCount = 0, waterproofBootsCount = 0, slipOnsCount = 0, platformsCount = 0, heelsCount = 0, balletFlatsCount = 0;     //For the receipt to count the order quantity
    int casualSneakersSize = 0, runningShoesSize = 0, loafersSize = 0, dressShoesSize = 0;             //For the receipt to count the size
    int sandalsSize = 0, leatherBootsSize = 0, ruggedBootsSize = 0, waterproofBootsSize = 0;
    int slipOnsSize = 0, platformsSize = 0, heelsSize = 0, balletFlatsSize = 0;
    int socksCount = 0, insolesCount = 0, cleanerCount = 0, polishCount = 0, shoelacesCount = 0, brushCount = 0, padsCount = 0, hornCount = 0;
    float order = 0, totalBefore = 0, total = 0, vatTotal = 0, seniorTotal = 0, cashAmount, change = 0, totalWithVat = 0;
    const float vat = 0.12, discount = 0.20;
    char senior, pwd, sizeType;

    cout << "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" << endl
        << "|||||||||||||||||||||||||||||||||||SHOEMAR FOOTWEAR CO.||||||||||||||||||||||||||||||||||" << endl
        << "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" << endl << endl;

    cout << "                                 Hello! Welcome to Shoemar!" << endl;
    cout << "                          ========================================" << endl;
    cout << "                                         CATEGORIES               " << endl;
    cout << "                          ========================================" << endl;
    cout << "                               1 - Footwear | 2 - Accessories" << endl << endl;

    //if the input is invalid, it repeats the question
    while (true) {
        cout << "How many items would you like to order? ";
        cin >> numOrders;
        if (cin.fail()) {      //counts alphabet as invalid input
            cin.clear();
            cin.ignore(1000, '\n');
            cout << "Invalid Amount!" << endl;
        }
        else {
            break;     //breaks the loop if the user input is valid
        }
    }

    //Loops depending on the user's order amount
    for (int i = 1; i <= numOrders; i++) {

        cout << endl << "                 ---- ORDER #" << i << " ----" << endl;

        // reset order price for each item
        order = 0;

        //if the input is invalid, it repeats the question
        while (true) {
            cout << "Enter option number (1 - Footwear, 2 - Accessories): ";
            cin >> choice1;
            if (cin.fail()) {     //counts alphabet as invalid input
                cin.clear();
                cin.ignore(1000, '\n');
                cout << "Invalid option!" << endl;
            }
            else {
                break;
            }
        }

        if (choice1 == 1) {
            cout << " 1 - Casual Sneakers--------PHP 1499.99 |  2 - Running Shoes-----PH P2799.99" << endl;
            cout << " 3 - Loafers----------------PHP 1799.99 |  4 - Dress Shoes-------PHP 1899.99" << endl;
            cout << " 5 - Sandals-----------------PHP 899.99 |  6 - Leather Boots-----PHP 2999.99" << endl;
            cout << " 7 - Rugged Boots-----------PHP 2399.99 |  8 - Waterproof Boots--PHP 1299.99" << endl;
            cout << " 9 - Slip-ons----------------PHP 899.99 | 10 - Platforms---------PHP 1199.99" << endl;
            cout << "11 - Heels------------------PHP 1399.99 | 12 - Ballet Flats-------PHP 999.99" << endl << endl;

            while (true) {
                cout << "Enter option number: ";
                cin >> choice2;

                if (cin.fail()) {      //counts alphabet as invalid input
                    cin.clear();
                    cin.ignore(1000, '\n');
                    cout << "Invalid option!" << endl;
                    continue;
                }

                //adds the price with the corresponding order no. in the shoes category and invalid if the input is not in the options
                if (choice2 == 1) {
                    order = 1499.99;
                }
                else if (choice2 == 2) {
                    order = 2799.99;
                }
                else if (choice2 == 3) {
                    order = 1799.99;
                }
                else if (choice2 == 4) {
                    order = 1899.99;
                }
                else if (choice2 == 5) {
                    order = 899.99;
                }
                else if (choice2 == 6) {
                    order = 2999.99;
                }
                else if (choice2 == 7) {
                    order = 2399.99;
                }
                else if (choice2 == 8) {
                    order = 1299.99;
                }
                else if (choice2 == 9) {
                    order = 899.99;
                }
                else if (choice2 == 10) {
                    order = 1199.99;
                }
                else if (choice2 == 11) {
                    order = 1399.99;
                }
                else if (choice2 == 12) {
                    order = 999.99;
                }
                else {
                    cout << "Invalid Option!" << endl;
                    continue;
                }
                break;
            }
            cout << endl << "Select size type:\n";
            cout << "1 - UK Sizes (39-48)" << endl;
            cout << "2 - US Sizes (6-13)" << endl;
            cout << "Enter option: ";

            while (true) {
                cin >> sizeType;

                if (sizeType == '1' || sizeType == '2') break;

                cout << "Invalid option! Enter 1 for UK or 2 for US: ";
            }

            // Display size brackets
            if (sizeType == '1') {
                cout << "Available UK Sizes: [39 40 41 42 43 44 45 46 47 48]\n";
            }
            else {
                cout << "Available US Sizes: [6 7 8 9 10 11 12 13]\n";
            }

            // Input actual shoe size
            while (true) {
                cout << "Enter shoe size: ";
                cin >> shoeSize;

                if (cin.fail()) {
                    cin.clear();
                    cin.ignore(1000, '\n');
                    cout << "Invalid size! Enter a number.\n";
                    continue;
                }

                if (sizeType == '1' && (shoeSize >= 39 && shoeSize <= 48)) break;
                if (sizeType == '2' && (shoeSize >= 6 && shoeSize <= 13)) break;

                cout << "Size not in bracket! Try again.\n";
            }
        }
        else if (choice1 == 2) {
            cout << " 1 - Socks-------------------PHP 199.99 |  2 - Insoles------------PHP 250.00" << endl;
            cout << " 3 - Shoe Cleaner------------PHP 230.00 |  4 - Shoe Polish--------PHP 140.00" << endl;
            cout << " 5 - Shoelaces---------------PHP 100.00 |  6 - Shoe Brush---------PHP 140.00" << endl;
            cout << " 7 - Shoe Pads----------------PHP 90.00 |  8 - Shoe Horn-----------PHP 70.00" << endl << endl;

            while (true) {
                cout << "Enter option number: ";
                cin >> choice3;
                if (cin.fail()) {      //counts alphabet as invalid input
                    cin.clear();
                    cin.ignore(1000, '\n');
                    cout << "Invalid option!" << endl;
                    continue;
                }

                //adds the price with the corresponding order no. in the accessories category and invalid if the input is not in the options
                if (choice3 == 1) {
                    order = 199.99;
                }
                else if (choice3 == 2) {
                    order = 250.00;
                }
                else if (choice3 == 3) {
                    order = 230.00;
                }
                else if (choice3 == 4) {
                    order = 140.00;
                }
                else if (choice3 == 5) {
                    order = 100.00;
                }
                else if (choice3 == 6) {
                    order = 140.00;
                }
                else if (choice3 == 7) {
                    order = 90.00;
                }
                else if (choice3 == 8) {
                    order = 70.00;
                }
                else {
                    cout << "Invalid Option!" << endl;
                    continue;
                }
                break;
            }
        }
        else {
            cout << "Invalid category! Try again." << endl;
            i--;     //decrements i so that the loop would not proceed to the next if the input is invalid
            continue;
        }

        while (true) {
            cout << "Enter purchase quantity: ";
            cin >> quanti;
            if (cin.fail()) {      //counts alphabet as invalid input
                cin.clear();
                cin.ignore(1000, '\n');
                cout << "Invalid Input!" << endl;
            }
            else {
                break;
            }
        }

        totalBefore += order * quanti;
        if (choice1 == 1) { // Footwear
            if (choice2 == 1) {
                casualSneakersCount = quanti;     //equating the count of the order (for the receipt) to the user's chosen quantity. Also counts the size for the receipt
                casualSneakersSize = shoeSize;
            }
            else if (choice2 == 2) {
                runningShoesCount = quanti;
                runningShoesSize = shoeSize;
            }
            else if (choice2 == 3) {
                loafersCount = quanti;
                loafersSize = shoeSize;
            }
            else if (choice2 == 4) {
                dressShoesCount = quanti;
                dressShoesSize = shoeSize;
            }
            else if (choice2 == 5) {
                sandalsCount = quanti;
                sandalsSize = shoeSize;
            }
            else if (choice2 == 6) {
                leatherBootsCount = quanti;
                leatherBootsSize = shoeSize;
            }
            else if (choice2 == 7) {
                ruggedBootsCount = quanti;
                ruggedBootsSize = shoeSize;
            }
            else if (choice2 == 8) {
                waterproofBootsCount = quanti;
                waterproofBootsSize = shoeSize;
            }
            else if (choice2 == 9) {
                slipOnsCount = quanti;
                slipOnsSize = shoeSize;
            }
            else if (choice2 == 10) {
                platformsCount = quanti;
                platformsSize = shoeSize;
            }
            else if (choice2 == 11) {
                heelsCount = quanti;
                heelsSize = shoeSize;
            }
            else if (choice2 == 12) {
                balletFlatsCount = quanti;
                balletFlatsSize = shoeSize;
            }
        }
        else if (choice1 == 2) { // Accessories
            if (choice3 == 1) {
                socksCount = quanti;     //equating the count of the order (for the receipt) to the user's chosen quantity (accessories category)
            }
            else if (choice3 == 2) {
                insolesCount = quanti;
            }
            else if (choice3 == 3) {
                cleanerCount = quanti;
            }
            else if (choice3 == 4) {
                polishCount = quanti;
            }
            else if (choice3 == 5) {
                shoelacesCount = quanti;
            }
            else if (choice3 == 6) {
                brushCount = quanti;
            }
            else if (choice3 == 7) {
                padsCount = quanti;
            }
            else if (choice3 == 8) {
                hornCount = quanti;
            }
        }
    }

    //asks the user whether they are a senior citizen or a pwd, and resets the question if the input is invalid
    cout << "Are you a senior citizen? (Y / N) : ";
    while (true) {
        cin >> senior;

        cout << "Are you a person with disability (PWD)? (Y / N) : ";
        cin >> pwd;

        // Validate inputs
        bool validSenior = (senior == 'Y' || senior == 'y' || senior == 'N' || senior == 'n');
        bool validPwd = (pwd == 'Y' || pwd == 'y' || pwd == 'N' || pwd == 'n');

        if (!validSenior || !validPwd) {
            cout << "Invalid option! Please enter Y or N." << endl;
            continue;  // ask again
        }

        // Calculate discount or VAT
        if (senior == 'Y' || senior == 'y' || pwd == 'Y' || pwd == 'y') {
            seniorTotal = totalBefore * discount;
            total = totalBefore - seniorTotal;
        }
        else {
            vatTotal = totalBefore * vat;
            total = totalBefore + vatTotal;
        }
        break;  // exit loop if inputs are valid and calculations done
    }
    cout << "Your total is: PHP " << total << endl;
    while (true) {

        cout << "Enter cash amount: PHP ";
        cin >> cashAmount;
        if (cin.fail()) {      //counts alphabet as invalid input
            cin.clear();
            cin.ignore(1000, '\n');
            cout << "Please input a numerical value!" << endl;
        }
        else {
            break;
        }
    }
    cout << endl
        << "------------------------------------------------------------------------------------------" << endl;
    if (cashAmount >= total) {
        change = cashAmount - total;
    }
    else {
        cout << "Not enough cash!" << endl << endl;
        return 0;
    }
    //The construction of receipt
    cout << "                                    SHOEMAR FOOTWEAR CO. " << endl;
    cout << "                               Cabambangan, Bacolor, Pampanga" << endl;
    cout << "                                     (+63) 919-855-1814" << endl;
    cout << "------------------------------------------------------------------------------------------" << endl;
    cout << "Cashier: Jane D.                                                            #0067" << endl;
    cout << "------------------------------------------------------------------------------------------" << endl;
    cout << "|     Quantity   |       Size      |      Item      |      Price      |      Amount      |" << endl
        << "------------------------------------------------------------------------------------------" << endl;

    if (casualSneakersCount > 0)
        cout << "         " << casualSneakersCount << "                "
        << casualSneakersSize << "          Casual Sneakers     PHP 1499.99      PHP "
        << casualSneakersCount * 1499.99 << endl;

    if (runningShoesCount > 0)
        cout << "         " << runningShoesCount << "                "
        << runningShoesSize << "          Running Shoes      PHP 2799.99      PHP "
        << runningShoesCount * 2799.99 << endl;

    if (loafersCount > 0)
        cout << "         " << loafersCount << "                "
        << loafersSize << "             Loafers         PHP 1799.99      PHP "
        << loafersCount * 1799.99 << endl;

    if (dressShoesCount > 0)
        cout << "         " << dressShoesCount << "                "
        << dressShoesSize << "           Dress Shoes       PHP 1899.99      PHP "
        << dressShoesCount * 1899.99 << endl;

    if (sandalsCount > 0)
        cout << "         " << sandalsCount << "                "
        << sandalsSize << "             Sandals          PHP 899.99       PHP "
        << sandalsCount * 899.99 << endl;

    if (leatherBootsCount > 0)
        cout << "         " << leatherBootsCount << "                "
        << leatherBootsSize << "          Leather Boots      PHP 2999.99      PHP "
        << leatherBootsCount * 2999.99 << endl;

    if (ruggedBootsCount > 0)
        cout << "         " << ruggedBootsCount << "                "
        << ruggedBootsSize << "           Rugged Boots       PHP 2399.99      PHP "
        << ruggedBootsCount * 2399.99 << endl;

    if (waterproofBootsCount > 0)
        cout << "         " << waterproofBootsCount << "                "
        << waterproofBootsSize << "        Waterproof Boots     PHP 1299.99      PHP "
        << waterproofBootsCount * 1299.99 << endl;

    if (slipOnsCount > 0)
        cout << "         " << slipOnsCount << "                "
        << slipOnsSize << "             Slip-ons        PHP 899.99       PHP "
        << slipOnsCount * 899.99 << endl;

    if (platformsCount > 0)
        cout << "         " << platformsCount << "                "
        << platformsSize << "             Platforms        PHP 1199.99      PHP "
        << platformsCount * 1199.99 << endl;

    if (heelsCount > 0)
        cout << "         " << heelsCount << "                "
        << heelsSize << "              Heels          PHP 1399.99      PHP "
        << heelsCount * 1399.99 << endl;

    if (balletFlatsCount > 0)
        cout << "         " << balletFlatsCount << "                "
        << balletFlatsSize << "          Ballet Flats       PHP 999.99       PHP "
        << balletFlatsCount * 999.99 << endl;

    // ACCESSORIES â€” NO SIZE
    if (socksCount > 0)
        cout << "         " << socksCount << "                "
        << "-" << "               Socks          PHP 199.99       PHP "
        << socksCount * 199.99 << endl;

    if (insolesCount > 0)
        cout << "         " << insolesCount << "                "
        << "-" << "              Insoles         PHP 250.00       PHP "
        << insolesCount * 250.00 << endl;

    if (cleanerCount > 0)
        cout << "         " << cleanerCount << "                "
        << "-" << "           Shoe Cleaner       PHP 230.00       PHP "
        << cleanerCount * 230.00 << endl;

    if (polishCount > 0)
        cout << "         " << polishCount << "                "
        << "-" << "            Shoe Polish       PHP 140.00       PHP "
        << polishCount * 140.00 << endl;

    if (shoelacesCount > 0)
        cout << "         " << shoelacesCount << "                "
        << "-" << "             Shoelaces        PHP 100.00       PHP "
        << shoelacesCount * 100.00 << endl;

    if (brushCount > 0)
        cout << "         " << brushCount << "                "
        << "-" << "            Shoe Brush        PHP 140.00       PHP "
        << brushCount * 140.00 << endl;

    if (padsCount > 0)
        cout << "         " << padsCount << "                "
        << "-" << "             Shoe Pads        PHP 90.00        PHP "
        << padsCount * 90.00 << endl;

    if (hornCount > 0)
        cout << "         " << hornCount << "               "
        << "-" << "             Shoe Horn        PHP 70.00        PHP "
        << hornCount * 70.00 << endl;


    cout << "------------------------------------------------------------------------------------------" << endl;
    cout << "Subtotal                                                                  PHP " << totalBefore << endl;

    if (senior == 'y' || senior == 'Y' || pwd == 'y' || pwd == 'Y') {
        cout << "VAT-Exempt                                                                   " << endl;
        cout << "Senior/PWD Discount (20%)                                               - PHP " << seniorTotal << endl;
    }
    else {
        cout << "VAT (12%)                                                               + PHP " << vatTotal << endl;
    }
    cout << "------------------------------------------------------------------------------------------" << endl;
    cout << "TOTAL                                                                     PHP " << total << endl;
    cout << "AMOUNT PAID                                                               PHP " << cashAmount << endl;
    cout << "------------------------------------------------------------------------------------------" << endl;
    cout << "CHANGE                                                                    PHP " << cashAmount - total << endl;
    cout << "------------------------------------------------------------------------------------------" << endl;
    return 0;
}


